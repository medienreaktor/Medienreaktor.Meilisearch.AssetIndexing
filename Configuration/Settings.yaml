Medienreaktor:
  Meilisearch:
    AssetIndexing:
      enable: true
      chunking:
        enabled: true
        # Adaptive chunking configuration (new)
        targets:
          baseline: 1200        # Base target size in characters for neutral density content
          denseMin: 800        # Lower bound when content is very dense (lists / many headings)
          denseMax: 1100        # Upper bound for dense content window
          narrativeMin: 1300    # Lower bound when content is narrative (long paragraphs, few headings)
          narrativeMax: 1600    # Upper bound for narrative content window
          absoluteMin: 600      # Hard minimum chunk size after all heuristics
          absoluteMax: 1600     # Hard maximum chunk size and soft split cap
        heuristics:
          headingDensityHigh: 1.2     # Headings per 1000 chars threshold for dense mode
          paragraphDensityHigh: 2.0   # Paragraphs per 1000 chars threshold for dense mode
          listDensityHigh: 0.35       # Ratio of list lines to total lines for dense mode
          longParagraphLen: 450       # Avg paragraph length threshold to begin narrative expansion
          longParagraphLenMaxBoost: 400 # Additional chars expansion span driver (maps to narrativeMax)
        merge:
          smallSectionThreshold: 200  # Sections below this get forward-merged to reduce fragmentation
        flush:
          minFillFactor: 0.3          # Need at least 30% of target before allowing an early flush
        oversized:
          softSplitCap: 1600          # Same as targets.absoluteMax (dup for clarity)
        overlap:
          enabled: false              # Currently not applied; reserved for future use
          smallTargetPercent: 0.08    # Potential overlap when target in dense window
          largeTargetPercent: 0.12    # Potential overlap when target in narrative/baseline window
          minChars: 300               # Minimum overlap size when enabled
      neededAttributesForIndex: []
      mediaTypeMapping:
        image/: 'Neos.Media:Image'
        video/: 'Neos.Media:Video'
        application/pdf: 'Medienreaktor.Site:Document.Pdf'
      allowedMediaTypePrefixes:
        - 'application/pdf'
    settings:
      filterableAttributes:
        - '__isAsset'
